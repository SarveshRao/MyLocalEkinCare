= form_for session[:current_online_customer], url: after_signup_path(id: session[:current_online_customer].current_state.to_sym), html: {id: 'customer_basic_details_form'}  do |f|
  .list-group
    - @number = Time.now.to_i
    %section.panel.panel-default.m-n.accordion-toggle{"data-toggle" => "collapse", :href => "#collapse#{@number}", id: "#collapse#{@number}"}
      %header.panel.panel-heading.m-n
        Family member
    .collapse.panel-collapse.in.m-b{id: "collapse#{@number}"}
      .list-group-item
        - @medical_history = FamilyMedicalHistory.new
        = f.fields_for 'medical_histories[]', @medical_history do |mh|
          = mh.select :relation,['Father','Mother','Brother','Sister','Son', 'Daughter', 'Grandfather','Grandmother'],{include_blank: 'Select a family member'}, {class: 'form-control no-border'}
      .list-group-item
        = f.fields_for 'medical_histories[]', @medical_history do |mh|
          = mh.select :medical_condition_1,['Blood pressure','Diabetics','Cardiovascular disease','Cancer','Other'],{include_blank: 'Select a medical condition - 1'}, {class: 'form-control no-border'}
      .list-group-item
        = f.fields_for 'medical_histories[]', @medical_history do |mh|
          = mh.select :medical_condition_2,['Blood pressure','Diabetics','Cardiovascular disease','Cancer','Other'],{include_blank: 'Select a medical condition - 2'}, {class: 'form-control no-border'}
      .list-group-item
        = f.fields_for 'medical_histories[]', @medical_history do |mh|
          = mh.select :medical_condition_3,['Blood pressure','Diabetics','Cardiovascular dissease','Cancer','Other'],{include_blank: 'Select a medical condition - 3'}, {class: 'form-control no-border'}
      .list-group-item.p-t
        = f.select :status, options_for_select([['Alive','yes'],['Deseased','no']], selected: session[:current_online_customer].status),{include_blank:'Vital status'}, {class: 'form-control no-border parsley-validated', 'data-required' => 'true'}
